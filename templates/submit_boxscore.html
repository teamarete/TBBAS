{% extends "base.html" %}
{% block content %}
<h2>Submit Box Score</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div style="padding: 10px; margin: 10px 0; background: {% if category == 'success' %}#d4edda{% else %}#f8d7da{% endif %}; border-radius: 5px;">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<p>Coaches: Submit your game box scores here. Data is posted immediately.</p>

<form method="POST" style="max-width: 900px; background: white; padding: 30px; border-radius: 8px; margin-top: 20px;">

    <h3>Game Information</h3>
    <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 5px;"><strong>Game Date:</strong></label>
        <input type="date" name="game_date" required style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
    </div>

    <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 5px;"><strong>Classification:</strong></label>
        <select name="classification" required style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
            <option value="">Select Classification</option>
            {% for code, name in classifications.items() %}
            <option value="{{ code }}">{{ name }}</option>
            {% endfor %}
        </select>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
        <!-- Team 1 -->
        <div style="border: 2px solid #3498db; padding: 20px; border-radius: 8px;">
            <h3 style="color: #3498db; margin-top: 0;">Team 1 (Home)</h3>

            <div style="margin-bottom: 15px;">
                <label><strong>Team Name:</strong></label>
                <input type="text" name="team1_name" required style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%; margin-top: 5px;">
            </div>

            <div style="margin-bottom: 15px;">
                <label><strong>Final Score:</strong></label>
                <input type="number" name="team1_score" required min="0" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%; margin-top: 5px;">
            </div>

            <h4>Stats (Optional)</h4>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div>
                    <label>FG Made:</label>
                    <input type="number" name="team1_fg" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>FG Attempted:</label>
                    <input type="number" name="team1_fga" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div>
                    <label>3PT Made:</label>
                    <input type="number" name="team1_3pt" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>3PT Attempted:</label>
                    <input type="number" name="team1_3pta" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div>
                    <label>FT Made:</label>
                    <input type="number" name="team1_ft" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>FT Attempted:</label>
                    <input type="number" name="team1_fta" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div>
                    <label>Rebounds:</label>
                    <input type="number" name="team1_reb" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>Assists:</label>
                    <input type="number" name="team1_ast" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div>
                    <label>Steals:</label>
                    <input type="number" name="team1_stl" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>Blocks:</label>
                    <input type="number" name="team1_blk" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div style="grid-column: span 2;">
                    <label>Turnovers:</label>
                    <input type="number" name="team1_to" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
            </div>
        </div>

        <!-- Team 2 -->
        <div style="border: 2px solid #e74c3c; padding: 20px; border-radius: 8px;">
            <h3 style="color: #e74c3c; margin-top: 0;">Team 2 (Away)</h3>

            <div style="margin-bottom: 15px;">
                <label><strong>Team Name:</strong></label>
                <input type="text" name="team2_name" required style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%; margin-top: 5px;">
            </div>

            <div style="margin-bottom: 15px;">
                <label><strong>Final Score:</strong></label>
                <input type="number" name="team2_score" required min="0" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%; margin-top: 5px;">
            </div>

            <h4>Stats (Optional)</h4>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div>
                    <label>FG Made:</label>
                    <input type="number" name="team2_fg" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>FG Attempted:</label>
                    <input type="number" name="team2_fga" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div>
                    <label>3PT Made:</label>
                    <input type="number" name="team2_3pt" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>3PT Attempted:</label>
                    <input type="number" name="team2_3pta" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div>
                    <label>FT Made:</label>
                    <input type="number" name="team2_ft" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>FT Attempted:</label>
                    <input type="number" name="team2_fta" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div>
                    <label>Rebounds:</label>
                    <input type="number" name="team2_reb" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>Assists:</label>
                    <input type="number" name="team2_ast" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div>
                    <label>Steals:</label>
                    <input type="number" name="team2_stl" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
                <div>
                    <label>Blocks:</label>
                    <input type="number" name="team2_blk" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>

                <div style="grid-column: span 2;">
                    <label>Turnovers:</label>
                    <input type="number" name="team2_to" min="0" style="padding: 6px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                </div>
            </div>
        </div>
    </div>

    <div style="margin-top: 30px;">
        <label style="display: block; margin-bottom: 5px;"><strong>Your Name/Email (Optional):</strong></label>
        <input type="text" name="submitted_by" placeholder="Coach Name or Email" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
    </div>

    <div style="margin-top: 30px;">
        <button type="submit" style="background: #27ae60; color: white; padding: 15px 30px; border: none; border-radius: 5px; font-size: 16px; cursor: pointer;">
            Submit Box Score
        </button>
        <a href="/boxscores" style="margin-left: 15px; color: #3498db; text-decoration: none;">View All Box Scores</a>
    </div>
</form>

{% endblock %}
